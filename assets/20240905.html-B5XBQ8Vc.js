import{_ as r,c as p,a as l,b as s,d as i,e as a,o as t,r as d}from"./app-vAERMEX6.js";const o="/miniprogram/miniprogram2.png",m="/miniprogram/miniprogram1.png",g="/miniprogram/miniprogram4.png",u="/miniprogram/miniprogram5.png",c="/miniprogram/miniprogram6.png",v="/miniprogram/miniprogram7.png",h="/miniprogram/miniprogram8.png",b="/miniprogram/miniprogram9.png",x="/miniprogram/miniprogram10.png",f="/miniprogram/miniprogram11.png",_="/miniprogram/miniprogram12.png",q="/miniprogram/miniprogram13.png",j="/miniprogram/miniprogram14.png",k="/miniprogram/miniprogram15.png",S="/miniprogram/miniprogram16.png",w="/miniprogram/miniprogram17.png",J="/miniprogram/miniprogram18.png",N="/miniprogram/miniprogram19.png",A={},P={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},B={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},y={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},W={href:"https://vuejs.org/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://www.html5plus.org/",target:"_blank",rel:"noopener noreferrer"},I={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},O={href:"https://mp.jd.com/?entrance=taro",target:"_blank",rel:"noopener noreferrer"},E={href:"https://smartprogram.baidu.com/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://mini.open.alipay.com/",target:"_blank",rel:"noopener noreferrer"},C={href:"https://developer.open-douyin.com/",target:"_blank",rel:"noopener noreferrer"},L={href:"https://q.qq.com/",target:"_blank",rel:"noopener noreferrer"},T={href:"https://open.feishu.cn/document/uYjL24iN/ucDOzYjL3gzM24yN4MjN",target:"_blank",rel:"noopener noreferrer"},V={href:"https://mp.kuaishou.com/",target:"_blank",rel:"noopener noreferrer"};function Q(R,n){const e=d("ExternalLinkIcon");return t(),p("div",null,[n[34]||(n[34]=l(`<h1 id="微信小程序开发相关" tabindex="-1"><a class="header-anchor" href="#微信小程序开发相关"><span>微信小程序开发相关</span></a></h1><h1 id="_1-介绍" tabindex="-1"><a class="header-anchor" href="#_1-介绍"><span>1 介绍</span></a></h1><h2 id="_1-1-微信小程序发展历程" tabindex="-1"><a class="header-anchor" href="#_1-1-微信小程序发展历程"><span>1.1 微信小程序发展历程</span></a></h2><p><strong>2015年之前（对内使用）</strong></p><p>通过WeixinJSBridge提供一些简单客户端API给内部业务使用。</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">WeixinJSBridge.invoke(&#39;imagePreview&#39;, {</span>
<span class="line">    current: &#39;http://inews.gtimg.com/newsapp_bt/0/1693121381/641&#39;,</span>
<span class="line">    urls: [ // 所有图片的URL列表，数组格式&#39;https://img1.gtimg.com/10/1048/104857/10485731_980x1200_0.jpg&#39;,&#39;https://img1.gtimg.com/10/1048/104857/10485726_980x1200_0.jpg&#39;,&#39;https://img1.gtimg.com/10/1048/104857/10485729_980x1200_0.jpg&#39;]}, function(res) {</span>
<span class="line">    console.log(res.err_msg)})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2015年初（对外）</strong></p><p>发布了JS-SDK，开放了拍摄、录音、语音识别、二维码、地图、支付、分享、卡券等几十个API。</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">wx.previewImage({</span>
<span class="line">  current: &#39;https://img1.gtimg.com/10/1048/104857/10485726_980x1200_0.jpg&#39;,</span>
<span class="line">  urls: [ // 所有图片的URL列表，数组格式&#39;https://img1.gtimg.com/10/1048/104857/10485731_980x1200_0.jpg&#39;,&#39;https://img1.gtimg.com/10/1048/104857/10485726_980x1200_0.jpg&#39;,&#39;https://img1.gtimg.com/10/1048/104857/10485729_980x1200_0.jpg&#39;],success: function(res) {</span>
<span class="line">    console.log(res)}})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>发布</strong>SDK<strong>增强版</strong></p><p>为了解决白屏问题，该版本包含“微信Web资源离线存储”功能，</p><p>通过使用微信离线存储，Web 开发者可借助微信提供的资源存储能力，直接从微信本地加载 Web 资源而不需要再从服务端拉取，从而减少网页加载时间，为微信用户提供更优质的网页浏览体验。每个公众号下所有 Web App 累计最多可缓存 5M 的资源。</p><p><strong>SDK</strong>存在问题：</p><ol><li>加载大量css或者javascript导致页面打开时会有白屏问题；</li><li>体验问题：页面切换的生硬和点击的迟滞感；</li></ol><p><strong>小程序的设计目标：</strong></p><ul><li><em>快速的加载</em></li><li><em>更强大的能力</em></li><li><em>原生的体验</em></li><li><em>易用且安全的微信数据开放</em></li><li><em>高效和简单的开发</em></li></ul><p><img src="`+o+'" alt="img"></p><p>微信客户端给小程序所提供的环境为宿主环境。小程序借助宿主环境提供的能力，可以完成许多普通网页无法完成的功能。</p><h2 id="_1-2-小程序技术架构" tabindex="-1"><a class="header-anchor" href="#_1-2-小程序技术架构"><span>1.2 小程序技术架构</span></a></h2><h3 id="基础架构" tabindex="-1"><a class="header-anchor" href="#基础架构"><span>基础架构</span></a></h3><p>小程序的运行环境分成<strong>渲染层</strong>和<strong>逻辑层</strong>，其中 WXML 模板和 WXSS 样式工作在渲染层，JS 脚本工作在逻辑层。</p><p>小程序的渲染层和逻辑层分别由2个线程管理：渲染层的界面使用了WebView 进行渲染；逻辑层采用JsCore线程运行JS脚本。一个小程序存在多个界面，所以渲染层存在多个WebView线程，这两个线程的通信会经由微信客户端（下文中也会采用Native来代指微信客户端）做中转，逻辑层发送网络请求也经由Native转发。</p><p><img src="'+m+'" alt="img"></p><h3 id="目录结构" tabindex="-1"><a class="header-anchor" href="#目录结构"><span>目录结构</span></a></h3><p>一个小程序项目，目录结构主要包括：</p><p><a href="/miniprogram/miniprogram3.png">img</a></p><p>app.js</p><p><img src="'+g+'" alt="img"></p><p>app.json</p><p><img src="'+u+'" alt="img"></p><h3 id="页面组件" tabindex="-1"><a class="header-anchor" href="#页面组件"><span>页面组件</span></a></h3><p>页面组件分为4个文件，其中index.js是页面主要逻辑函数，index.json是页面相关配置信息，index.wxml是页面结构，index.wxss是样式文件。</p><p><img src="'+c+`" alt="img"></p><p>在小程序中添加一个页面只需要在app.json中加一行配置：</p><div class="language-JSON line-numbers-mode" data-highlighter="prismjs" data-ext="JSON" data-title="JSON"><pre><code><span class="line">{</span>
<span class="line">    &quot;pages&quot;: [</span>
<span class="line">        &quot;pages/index/index&quot;,</span>
<span class="line">        &quot;pages/logs/logs&quot;</span>
<span class="line">    ]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><video data-lark-video-uri="drivetoken://IsMvbrjQlo21ZExa7t4cAV3cnNf" data-lark-video-mime="video/mp4" data-lark-video-size="346062" data-lark-video-duration="0" data-lark-video-name="88_1724404497.mp4" data-lark-video-width="220" data-lark-video-height="480"></video></p><p>更多原子组件参考：https://developers.weixin.qq.com/miniprogram/dev/component/</p><h3 id="api" tabindex="-1"><a class="header-anchor" href="#api"><span>API</span></a></h3><p>为了让开发者可以很方便的调起微信提供的能力，例如获取用户信息、微信支付等等，小程序提供了很多 API 给开发者去使用。</p><p>要获取用户的地理位置时，只需要：</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">wx.getLocation({</span>
<span class="line">  type: &#39;wgs84&#39;,</span>
<span class="line">  success: (res) =&gt; {</span>
<span class="line">      var latitude = res.latitude // 纬度</span>
<span class="line">      var longitude = res.longitude // 经度</span>
<span class="line">  }})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>调用微信扫一扫能力，只需要：</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">wx.scanCode({</span>
<span class="line">    success: (res) =&gt; {</span>
<span class="line">        console.log(res)</span>
<span class="line">    }</span>
<span class="line">})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他更多API参考：https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API</p><h2 id="_1-3-云开发" tabindex="-1"><a class="header-anchor" href="#_1-3-云开发"><span>1.3 云开发</span></a></h2><h3 id="云开发是什么" tabindex="-1"><a class="header-anchor" href="#云开发是什么"><span>云开发是什么？</span></a></h3><p>官方的解释，云开发可以为Web、小程序、移动应用等提供可靠、丰富的一站式后端能力，并提供多语言 SDK，轻松开发多端应用。</p><p>简单的说，就是云开发是一套综合类服务的技术产品，通常开发一个完整的应用（小程序也好，Web、移动应用也好）都需要数据库、存储、CDN、后端函数、静态托管、用户登录等等，但是云开发将这些服务都集成到了一起，而且以一种全新的开发方式，让开发一个应用更加快速、方便、便宜且强大，引领未来技术开发的新趋势。</p><p>云开发主要集成的服务以及相关说明如下：</p><ul><li>云数据库：它是一个性能强大的文档型数据库（非关系型数据库），支持基础读写、聚合搜索、数据库事务、实时推送等功能；</li><li>云函数：云函数可以以函数的形式运行后端代码，支持SDK的调用或HTTP请求。云函数存储在云端，可以根据函数的使用情况，自动扩缩容；</li><li>云存储：云开发的云存储提供稳定、安全、低成本、简单易用的云端存储服务，支持任意数量和形式的非结构化数据存储，如图片、文档、音频、视频、文件等；</li><li>云调用：云调用是云开发提供的基于云函数使用小程序开放接口以及腾讯云的能力，支持在云函数调用服务端开放接口，如发送模板消息、获取小程序码等操作都可以在云函数中完成；</li></ul><h2 id="_1-4-发布上线" tabindex="-1"><a class="header-anchor" href="#_1-4-发布上线"><span>1.4 发布上线</span></a></h2><h3 id="小程序版本" tabindex="-1"><a class="header-anchor" href="#小程序版本"><span>小程序版本</span></a></h3><p><img src="`+v+'" alt="img"></p><p><img src="'+h+'" alt="img"></p><h3 id="发布流程" tabindex="-1"><a class="header-anchor" href="#发布流程"><span>发布流程</span></a></h3><p>一个小程序从开发完到上线一般要经过 预览-&gt; 上传代码 -&gt; 提交审核 -&gt; 发布等步骤</p><p><strong>预览</strong></p><p>使用开发者工具可以预览小程序，帮助开发者检查小程序在移动客户端上的真实表现。</p><p>点击开发者工具顶部操作栏的预览按钮，开发者工具会自动打包当前项目，并上传小程序代码至微信的服务器，成功之后会在界面上显示一个二维码。使用当前小程序开发者的微信扫码即可看到小程序在手机客户端上的真实表现。</p><p><strong>上传代码</strong></p><p>同预览不同，上传代码是用于提交体验或者审核使用的。</p><p>点击开发者工具顶部操作栏的上传按钮，填写版本号以及项目备注，需要注意的是，这里版本号以及项目备注是为了方便管理员检查版本使用的，开发者可以根据自己的实际要求来填写这两个字段。</p>',62)),s("p",null,[n[1]||(n[1]=i("上传成功之后，登录")),s("a",P,[n[0]||(n[0]=i("小程序管理后台")),a(e)]),n[2]||(n[2]=i(" 版本管理 - 开发版本 就可以找到刚提交上传的版本了。"))]),n[35]||(n[35]=s("p",null,"可以将这个版本设置 体验版 或者是 提交审核",-1)),n[36]||(n[36]=s("p",null,[s("img",{src:b,alt:"img"})],-1)),n[37]||(n[37]=s("p",null,[s("strong",null,"提交审核")],-1)),n[38]||(n[38]=s("p",null,"为了保证小程序的质量，以及符合相关的规范，小程序的发布是需要经过审核的。",-1)),s("p",null,[n[4]||(n[4]=i("在开发者工具中上传了小程序代码之后，登录 ")),s("a",B,[n[3]||(n[3]=i("小程序管理后台")),a(e)]),n[5]||(n[5]=i(" 版本管理 - 开发版本 找到提交上传的版本。"))]),n[39]||(n[39]=s("p",null,[i("在开发版本的列表中，点击 "),s("strong",null,"提交审核"),i(" 按照页面提示，填写相关的信息，即可以将小程序提交审核。")],-1)),n[40]||(n[40]=s("p",null,[i("需要注意的是，"),s("strong",null,"请开发者严格测试了版本之后，再提交审核"),i("， 过多的审核不通过，可能会影响后续的时间。")],-1)),n[41]||(n[41]=s("p",null,[s("strong",null,"发布")],-1)),s("p",null,[n[7]||(n[7]=i("审核通过之后，管理员的微信中会收到小程序通过审核的通知，此时登录 ")),s("a",y,[n[6]||(n[6]=i("小程序管理后台")),a(e)]),n[8]||(n[8]=i(" 版本管理 - 审核版本中可以看到通过审核的版本。"))]),n[42]||(n[42]=l('<p>点击发布后，即可发布小程序。小程序提供了两种发布模式：全量发布和分阶段发布。全量发布是指当点击发布之后，所有用户访问小程序时都会使用当前最新的发布版本。分阶段发布是指分不同时间段来控制部分用户使用最新的发布版本，分阶段发布我们也称为灰度发布。一般来说，普通小程序发布时采用全量发布即可，当小程序承载的功能越来越多，使用的用户数越来越多时，采用分阶段发布是一个非常好的控制风险的办法。</p><h2 id="_1-5-性能优化" tabindex="-1"><a class="header-anchor" href="#_1-5-性能优化"><span>1.5 性能优化</span></a></h2><h3 id="控制代码包大小" tabindex="-1"><a class="header-anchor" href="#控制代码包大小"><span>控制代码包大小</span></a></h3><ol><li>精简代码，去掉不必要的WXML结构和未使用的WXSS定义。</li><li>减少在代码包中直接嵌入的资源文件。</li><li>压缩图片，使用适当的图片格式。</li></ol><h3 id="分包加载流程" tabindex="-1"><a class="header-anchor" href="#分包加载流程"><span>分包加载流程</span></a></h3><p>一般情况下，小程序的代码将打包在一起，在小程序启动时一次性下载完成。采用分包时，小程序的代码包可以被划分为几个：一个是“主包”，包含小程序启动时会马上打开的页面代码和相关资源；其余是“分包”，包含其余的代码和资源。这样，小程序启动时，只需要先将主包下载完成，就可以立刻启动小程序。这样就可以显著降低小程序代码包的下载时间</p><p><img src="'+x+`" alt="img"></p><div class="language-JSON line-numbers-mode" data-highlighter="prismjs" data-ext="JSON" data-title="JSON"><pre><code><span class="line">{</span>
<span class="line">  &quot;pages&quot;:[</span>
<span class="line">    &quot;pages/index&quot;,</span>
<span class="line">    &quot;pages/logs&quot;</span>
<span class="line">  ],</span>
<span class="line">  &quot;subPackages&quot;: [</span>
<span class="line">    {</span>
<span class="line">      &quot;root&quot;: &quot;packageA&quot;,</span>
<span class="line">      &quot;pages&quot;: [</span>
<span class="line">        &quot;pages/cat&quot;,</span>
<span class="line">        &quot;pages/dog&quot;</span>
<span class="line">      ]</span>
<span class="line">    }, {</span>
<span class="line">      &quot;root&quot;: &quot;packageB&quot;,</span>
<span class="line">      &quot;pages&quot;: [</span>
<span class="line">        &quot;pages/apple&quot;,</span>
<span class="line">        &quot;pages/banana&quot;</span>
<span class="line">      ]</span>
<span class="line">    }</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+f+'" alt="img"></p><h1 id="_2-开发框架" tabindex="-1"><a class="header-anchor" href="#_2-开发框架"><span>2 开发框架</span></a></h1><h2 id="_2-1-uniapp" tabindex="-1"><a class="header-anchor" href="#_2-1-uniapp"><span>2.1 UniAPP</span></a></h2>',11)),s("p",null,[n[10]||(n[10]=s("code",null,"uni-app",-1)),n[11]||(n[11]=i(" 是一个使用 ")),s("a",W,[n[9]||(n[9]=i("Vue.js")),a(e)]),n[12]||(n[12]=i(" 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、Web（响应式）、以及各种小程序（微信/支付宝/百度/头条/飞书/QQ/快手/钉钉/淘宝）、快应用等多个平台。"))]),n[43]||(n[43]=s("p",null,[s("img",{src:_,alt:"img"})],-1)),n[44]||(n[44]=s("p",null,[i("uni，读 "),s("code",null,"you ni"),i("，是统一的意思。DCloud是这个小程序行业行业的开创者。DCloud于2012年开始研发小程序技术，优化webview的功能和性能，并加入W3C和HTML5中国产业联盟，推出了HBuilder开发工具，为后续产业化做准备。2015年，DCloud正式商用了自己的小程序，产品名为“流应用”，它不是"),s("code",null,"B/S"),i("模式的轻应用，而是能接近原生功能、性能的App，并且即点即用，第一次使用时可以做到边下载边使用。")],-1)),s("p",null,[n[14]||(n[14]=i("为将该技术发扬光大，DCloud将技术标准捐献给工信部旗下的")),s("a",D,[n[13]||(n[13]=i("HTML5中国产业联盟")),a(e)]),n[15]||(n[15]=i("，并推进各家流量巨头接入该标准，开展小程序业务。"))]),n[45]||(n[45]=s("h2",{id:"_2-2-taro",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-2-taro"},[s("span",null,"2.2 Taro")])],-1)),s("p",null,[n[24]||(n[24]=s("strong",null,"Taro",-1)),n[25]||(n[25]=i(" 是一个开放式跨端跨框架解决方案，支持使用 React/Vue/Nerv 等框架来开发 ")),s("a",I,[n[16]||(n[16]=i("微信")),a(e)]),n[26]||(n[26]=i(" / ")),s("a",O,[n[17]||(n[17]=i("京东")),a(e)]),n[27]||(n[27]=i(" / ")),s("a",E,[n[18]||(n[18]=i("百度")),a(e)]),n[28]||(n[28]=i(" / ")),s("a",M,[n[19]||(n[19]=i("支付宝")),a(e)]),n[29]||(n[29]=i(" / ")),s("a",C,[n[20]||(n[20]=i("字节跳动")),a(e)]),n[30]||(n[30]=i(" / ")),s("a",L,[n[21]||(n[21]=i("QQ")),a(e)]),n[31]||(n[31]=i(" / ")),s("a",T,[n[22]||(n[22]=i("飞书")),a(e)]),n[32]||(n[32]=i(" / ")),s("a",V,[n[23]||(n[23]=i("快手")),a(e)]),n[33]||(n[33]=i(" 小程序 / H5 / RN 等应用。"))]),n[46]||(n[46]=l('<p>现如今市面上端的形态多种多样，Web、React Native、微信小程序等各种端大行其道。当业务要求同时在不同的端都要求有所表现的时候，针对不同的端去编写多套代码的成本显然非常高，这时候只编写一套代码就能够适配到多端的能力就显得极为需要。</p><p><img src="'+q+`" alt="img"></p><h1 id="_3-基于taro快速搭建一个小程序项目" tabindex="-1"><a class="header-anchor" href="#_3-基于taro快速搭建一个小程序项目"><span>3 基于Taro快速搭建一个小程序项目</span></a></h1><h2 id="_3-1-目录结构" tabindex="-1"><a class="header-anchor" href="#_3-1-目录结构"><span>3.1 目录结构</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">├── dist                        编译结果目录</span>
<span class="line">|</span>
<span class="line">├── config                      项目编译配置目录</span>
<span class="line">|   ├── index.js                默认配置</span>
<span class="line">|   ├── dev.js                  开发环境配置</span>
<span class="line">|   └── prod.js                 生产环境配置</span>
<span class="line">|</span>
<span class="line">├── src                         源码目录</span>
<span class="line">|   ├── pages                   页面文件目录</span>
<span class="line">|   |   └── index               index 页面目录</span>
<span class="line">|   |       ├── index.js        index 页面逻辑</span>
<span class="line">|   |       ├── index.css       index 页面样式</span>
<span class="line">|   |       └── index.config.js index 页面配置</span>
<span class="line">|   |</span>
<span class="line">|   ├── app.js                  项目入口文件</span>
<span class="line">|   ├── app.css                 项目总通用样式</span>
<span class="line">|   └── app.config.js           项目入口配置</span>
<span class="line">|</span>
<span class="line">├── project.config.json         微信小程序项目配置 project.config.json</span>
<span class="line">├── project.tt.json             抖音小程序项目配置 project.tt.json</span>
<span class="line">├── project.swan.json           百度小程序项目配置 project.swan.json</span>
<span class="line">├── project.qq.json             QQ 小程序项目配置 project.qq.json</span>
<span class="line">|</span>
<span class="line">├── babel.config.js             Babel 配置</span>
<span class="line">├── tsconfig.json               TypeScript 配置</span>
<span class="line">├── .eslintrc                   ESLint 配置</span>
<span class="line">|</span>
<span class="line">└── package.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-2-开发流程" tabindex="-1"><a class="header-anchor" href="#_3-2-开发流程"><span>3.2 开发流程</span></a></h2><ol><li>项目初始化，本地执行命令，然后vscode打开生成文件夹，目录结构如上：</li></ol><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">taro init myApp</span>
<span class="line"># 活着 npx @tarojs/cli init myApp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>修改代码后，执行命令，注意--watch参数：</li></ol><p><img src="`+j+'" alt="img"></p><p><img src="'+k+'" alt="img"></p><p><img src="'+S+'" alt="img"></p><p><img src="'+w+'" alt="img"></p><ol><li>打开微信开发者工具，监听dist文件夹；</li></ol><p><img src="'+J+'" alt="img"></p><p>微信开发者工具功能：编译、预览、真机调试、上传、版本管理等。</p><h1 id="_4-踩坑记录" tabindex="-1"><a class="header-anchor" href="#_4-踩坑记录"><span>4 踩坑记录</span></a></h1><h2 id="_4-1-无法直接操作dom" tabindex="-1"><a class="header-anchor" href="#_4-1-无法直接操作dom"><span>4.1 无法直接操作dom</span></a></h2><p>网页开发渲染线程和脚本线程是互斥的，长时间的脚本运行可能会导致页面失去响应，而在小程序中，二者是分开的，分别运行在不同的线程中。</p><p>网页开发者可以使用到各种浏览器暴露出来的 DOM API，进行 DOM 选中和操作。小程序的逻辑层和渲染层是分开的，逻辑层运行在 JSCore 中，并没有一个完整浏览器对象，因而缺少相关的DOM API和BOM API。这一区别导致了前端开发非常熟悉的一些库，例如 jQuery、 Zepto 等，在小程序中是无法运行。同时 JSCore 的环境同 NodeJS 环境也是不尽相同，所以一些 NPM 的包在小程序中也是无法运行。</p><h2 id="_4-2-单页模式" tabindex="-1"><a class="header-anchor" href="#_4-2-单页模式"><span>4.2 单页模式</span></a></h2><p>用户在朋友圈打开分享的小程序页面，并不会真正打开小程序，而是进入一个“小程序单页模式”的页面，“单页模式”有以下特点：</p><ol><li>“单页模式”下，页面顶部固定有导航栏，标题显示为当前页面 JSON 配置的标题。底部固定有操作栏，点击操作栏的“前往小程序”可打开小程序的当前页面。顶部导航栏与底部操作栏均不支持自定义样式。</li><li>“单页模式”默认运行的是小程序页面内容，但由于页面固定有顶部导航栏与底部操作栏，很可能会影响小程序页面的布局。因此，请开发者特别注意适配“单页模式”的页面交互，以实现流畅完整的交互体验。</li><li>“单页模式”下，一些组件或接口存在一定限制、</li></ol><h2 id="_4-3-接口需支持https协议" tabindex="-1"><a class="header-anchor" href="#_4-3-接口需支持https协议"><span>4.3 接口需支持https协议</span></a></h2><p><img src="'+N+'" alt="img"></p><h1 id="_5-参考文档" tabindex="-1"><a class="header-anchor" href="#_5-参考文档"><span>5 参考文档</span></a></h1><ol><li>https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95%E5%8F%B2</li><li>https://uniapp.dcloud.net.cn/resource.html</li></ol>',27))])}const H=r(A,[["render",Q],["__file","20240905.html.vue"]]),K=JSON.parse('{"path":"/blogs/other/20240905.html","title":"微信小程序开发相关","lang":"en-US","frontmatter":{"title":null,"date":"2024/09/05","tags":["日志"],"categories":["日志"]},"headers":[{"level":2,"title":"1.1 微信小程序发展历程","slug":"_1-1-微信小程序发展历程","link":"#_1-1-微信小程序发展历程","children":[]},{"level":2,"title":"1.2 小程序技术架构","slug":"_1-2-小程序技术架构","link":"#_1-2-小程序技术架构","children":[{"level":3,"title":"基础架构","slug":"基础架构","link":"#基础架构","children":[]},{"level":3,"title":"目录结构","slug":"目录结构","link":"#目录结构","children":[]},{"level":3,"title":"页面组件","slug":"页面组件","link":"#页面组件","children":[]},{"level":3,"title":"API","slug":"api","link":"#api","children":[]}]},{"level":2,"title":"1.3 云开发","slug":"_1-3-云开发","link":"#_1-3-云开发","children":[{"level":3,"title":"云开发是什么？","slug":"云开发是什么","link":"#云开发是什么","children":[]}]},{"level":2,"title":"1.4 发布上线","slug":"_1-4-发布上线","link":"#_1-4-发布上线","children":[{"level":3,"title":"小程序版本","slug":"小程序版本","link":"#小程序版本","children":[]},{"level":3,"title":"发布流程","slug":"发布流程","link":"#发布流程","children":[]}]},{"level":2,"title":"1.5 性能优化","slug":"_1-5-性能优化","link":"#_1-5-性能优化","children":[{"level":3,"title":"控制代码包大小","slug":"控制代码包大小","link":"#控制代码包大小","children":[]},{"level":3,"title":"分包加载流程","slug":"分包加载流程","link":"#分包加载流程","children":[]}]},{"level":2,"title":"2.1 UniAPP","slug":"_2-1-uniapp","link":"#_2-1-uniapp","children":[]},{"level":2,"title":"2.2 Taro","slug":"_2-2-taro","link":"#_2-2-taro","children":[]},{"level":2,"title":"3.1 目录结构","slug":"_3-1-目录结构","link":"#_3-1-目录结构","children":[]},{"level":2,"title":"3.2 开发流程","slug":"_3-2-开发流程","link":"#_3-2-开发流程","children":[]},{"level":2,"title":"4.1 无法直接操作dom","slug":"_4-1-无法直接操作dom","link":"#_4-1-无法直接操作dom","children":[]},{"level":2,"title":"4.2 单页模式","slug":"_4-2-单页模式","link":"#_4-2-单页模式","children":[]},{"level":2,"title":"4.3 接口需支持https协议","slug":"_4-3-接口需支持https协议","link":"#_4-3-接口需支持https协议","children":[]}],"git":{"createdTime":1725527242000,"updatedTime":1734058812000,"contributors":[{"name":"liqiu","email":"qiuli@sohu-inc.com","commits":2}]},"filePathRelative":"blogs/other/20240905.md"}');export{H as comp,K as data};
