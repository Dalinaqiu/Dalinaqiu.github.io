import{_ as t,c as n,a,o as s}from"./app-vAERMEX6.js";const i={};function o(l,e){return s(),n("div",null,e[0]||(e[0]=[a(`<p>最近开发微信小程序遇到一个问题，技术栈使用的是<code>Taro + React</code>。设计出了一种字体，给了字体包，Taro项目引入字体包是通过<code>@font-face</code>的方式引入的。代码如下：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">@font-face {</span>
<span class="line">  font-family: &#39;xxx&#39;;</span>
<span class="line">  src: url(&#39;xxx.ttf&#39;) format(&#39;truetype&#39;);</span>
<span class="line">  font-weight: normal;</span>
<span class="line">  font-style: normal;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>进行到这里就遇到了第一个问题：设计同学给的是<code>ttf</code>格式的字体包，大小为<code>5.1M</code>，但是小程序限制打包后的资源文件不超过2M，开发环境不超过4M，所以需要将字体包进行压缩。 常用的字体库文件格式有：</p><ul><li>TTF(TrueType Font): 字体格式是由苹果和微软为 PostScript 而开发的字体格式。在 Mac 和 Windows 操作系统上，TTF 一直是最常见的格式，所有主流浏览器都支持它</li><li>OTF(OpenType Font): 是一种字体格式，它是一种基于 TrueType 字体格式的扩展，支持更多的特性，如可变字体、字型设计、字形编辑等。</li><li>woff(Web Open Font Format): 是一种字体格式，它是一种基于 WOFF 的扩展，支持更多的特性，如可变字体、字型设计、字形编辑等。</li><li>woff2(Web Open Font Format 2.0): 是一种字体格式，它是一种基于 WOFF 的扩展，支持更多的特性，如可变字体、字型设计、字形编辑等。</li></ul><p>一般ttf格式转换成woff、woff2格式后，体积会小很多。</p><p>通过在线工具(convertio)[https://convertio.co/zh/font-converter/]转换后，<code>woff</code>大小为3M，<code>woff2</code>大小为2.1M。虽然体积减小了很多，但还是超出了限制。考虑到本地包空间宝贵，还是将字体库文件上传CDN，通过CDN地址引入。</p><p>开发过程中，又出现第2个问题：测试反馈小程序中字体渲染时会先展示默认字体然后渲染成对应字体，大概0.5秒左右，字体渲染过程有明显的卡顿感，影响用户体验。</p><p>通过Chrome工具查看后，字体包这个时候已经加载完毕，但是渲染过程需要时间。这个阶段的时间不可控，较好的设备渲染过程较快，不好的设备渲染过程较慢。</p><p>最后采用的方案是，降固定文案的几个字单独打了个字体包，也放在CDN上，节约宝贵的本地空间，同时因为是固定文字，字体包较小，几乎没有渲染过程，没有明显卡顿。</p>`,9)]))}const r=t(i,[["render",o],["__file","20240925.html.vue"]]),d=JSON.parse('{"path":"/blogs/other/20240925.html","title":"记录一个微信小程序字体库问题","lang":"en-US","frontmatter":{"title":"记录一个微信小程序字体库问题","date":"2024/09/25","tags":["日志"],"categories":["日志"]},"headers":[],"git":{"createdTime":1732763820000,"updatedTime":1732763820000,"contributors":[{"name":"liqiu","email":"qiuli@sohu-inc.com","commits":1}]},"filePathRelative":"blogs/other/20240925.md"}');export{r as comp,d as data};
